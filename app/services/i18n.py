"""Предоставляет функции локализации и перевода текстов интерфейса."""

TRANSLATIONS = {
    "en": {
        "title": "DAC Tournament",
        "nav_participants": "Participants",
        "nav_tournament": "Tournament",
        "nav_donate": "Donate",
        "nav_rules": "Rules",
        "nav_archive": "Archive",
        "register": "Registration",
        "submit": "Submit",
        "already_registered": "You are already registered",
        "registered_ok": "Registration completed",
        "registration_closed": "Registration closed, tournament started",
        "msg_invalid_steam_id": "Invalid Steam ID",
        "msg_chat_disabled": "Chat is disabled",
        "msg_chat_disabled_admin": "Chat is disabled by admin.",
        "msg_message_too_long": "Message is too long",
        "msg_cooldown_active": "Please wait before sending the next message",
        "msg_user_exists": "User already exists",
        "msg_invited_added": "Invited player added",
        "msg_group_not_found": "Group not found",
        "msg_lobby_password_updated": "Lobby password updated",
        "msg_invalid_lobby_password": "Lobby password must be exactly 4 digits",
        "msg_game_saved": "Game saved",
        "msg_manual_tie_break_saved": "Manual tie-break saved",
        "msg_playoff_stage_started": "Playoff stage started",
        "msg_players_promoted": "Players promoted",
        "msg_player_moved": "Player moved",
        "msg_player_replaced": "Player replaced",
        "msg_points_adjusted": "Points adjusted",
        "msg_playoff_game_saved": "Playoff game saved",
        "msg_donation_links_saved": "Donation links saved",
        "msg_donation_methods_saved": "Donation methods saved",
        "msg_prize_pool_saved": "Prize pool saved",
        "msg_donors_saved": "Donors saved",
        "msg_rules_saved": "Rules saved",
        "msg_archive_saved": "Archive saved",
        "msg_chat_settings_saved": "Chat settings saved",
        "msg_operation_failed": "Operation failed",
        "msg_status_ok": "Success",
        "msg_status_warn": "Warning",
        "participants_title": "Participants",
        "participants_baskets_filter": "Baskets",
        "participants_direct_invites_filter": "Direct Invites",
        "participants_main_roster_title": "Main roster",
        "participants_reserve_roster_title": "Reserve",
        "participants_direct_invites_title": "Direct Invites",
        "participants_empty": "No participants in this basket",
        "participants_nick": "Nick",
        "participants_steam_id": "Steam ID",
        "participants_game": "Game",
        "participants_current": "Current",
        "participants_highest": "Highest",
        "participants_telegram": "Telegram",
        "participants_discord": "Discord",
        "tournament_title": "Tournament",
        "tournament_group_stage": "Group stage",
        "tournament_no_draw": "Draw has not been created yet",
        "tournament_game": "Game",
        "tournament_lobby_pw": "Lobby PW",
        "tournament_playoff_title": "Current playoff stage / bracket",
        "tournament_started": "started",
        "tournament_pending": "pending",
        "tournament_scoring_mode": "Scoring mode",
        "tournament_matches": "Matches",
        "tournament_players": "Players",
        "tournament_standings": "Standings",
        "tournament_user_id": "User ID",
        "tournament_status": "Status",
        "tournament_status_out": "out",
        "tournament_status_in": "in",
        "tournament_bracket_matches": "Bracket / matches",
        "tournament_match": "Match",
        "donate_title": "Donate",
        "donate_links": "Donation links",
        "donate_no_links": "No links yet.",
        "donate_card_crypto": "Card / Crypto",
        "donate_no_methods": "No payment methods yet.",
        "donate_prize_pool": "Prize pool",
        "donate_no_prize_pool": "No prize pool data yet.",
        "donate_donors": "Donors",
        "donate_no_donors": "No donors yet.",
        "rules_title": "Rules",
        "archive_title": "Archive",
        "archive_open": "Open",
        "archive_empty": "No archive entries yet.",
        "admin_title": "Admin Panel",
        "admin_login_title": "Admin Login",
        "admin_login_placeholder": "Admin key",
        "admin_login_submit": "Login",
        "admin_logout": "Logout",
        "msg_admin_login_failed": "Invalid admin key",
        "admin_registration_toggle": "Registration toggle",
        "admin_registration_open": "Registration open",
        "admin_start_tournament": "Start Tournament",
        "admin_confirm_start_tournament": "Are you sure you want to start the tournament? Registration will be closed.",
        "admin_tournament_already_started": "Tournament already started",
        "admin_yes": "Yes",
        "admin_no": "No",
        "admin_save": "Save",
        "admin_manual_invited_add": "Manual invited add",
        "admin_participants_list": "Participants list",
        "admin_nickname": "Nickname",
        "admin_steam_id_or_url": "Steam ID or URL",
        "admin_add_to_invited": "Add to INVITED",
        "admin_stages_editor": "Stages editor",
        "admin_key": "key",
        "admin_date": "date",
        "admin_title_ru": "title_ru",
        "admin_title_en": "title_en",
        "admin_active": "active",
        "admin_save_stage": "Save stage",
        "admin_chat_settings": "Chat settings",
        "admin_chat_enabled": "Chat enabled",
        "admin_save_chat_settings": "Save chat settings",
        "admin_rules_content": "Rules content",
        "admin_rules_text": "Rules text",
        "admin_save_rules": "Save rules",
        "admin_content_blocks": "Content blocks (one per line)",
        "admin_save_donation_links": "Save donation links",
        "admin_save_donation_methods": "Save donation methods",
        "admin_save_prize_pool": "Save prize pool",
        "admin_save_donors": "Save donors",
        "admin_save_archive": "Save archive",
        "admin_draw_controls": "Draw controls",
        "admin_auto_draw": "Automatic draw",
        "admin_generate_playoff": "Generate playoff from groups",
        "admin_group_ids": "IDs in group",
        "admin_save_pw": "Save PW",
        "admin_generate_pin": "Generate PIN",
        "admin_save_game_result": "Save game result",
        "admin_save_tie_break": "Save tie-break",
        "admin_groups_not_created": "Groups are not created yet",
        "base_lang_en": "ENG",
        "base_lang_ru": "RU",
        "tournament_current_stage": "Current stage",
        "tournament_group_stage_top64": "Group Stage",
        "tournament_schedule": "Schedule",
        "tournament_tbd": "TBD",
        "tournament_roster": "Roster",
        "tournament_id": "ID",
        "tournament_pts": "PTS",
        "tournament_wins_short": "W",
        "tournament_top4": "Top4",
        "tournament_promote_rule": "Promotion rules by stage:",
        "tournament_stage_1_8_label": "Stage I 1/8 (56, 7x8, top-3)",
        "tournament_stage_1_4_label": "Stage II 1/4 (32, 4x8, top-4)",
        "tournament_stage_semifinal_groups_label": "Stage III semifinal groups (16, 2x8, top-4)",
        "tournament_stage_final_label": "Final (8, 22 points + win rule)",
        "tournament_stage_group_stage_label": "Group stage",
        "tournament_playoff": "Playoff",
        "tournament_final_22_hint": "22 points + next game Top1",
        "tournament_schedule_status": "Schedule / statuses",
        "tournament_group": "Group",
        "tournament_pw": "PW",
        "tournament_winner": "winner",
        "admin_group_manual_controls": "Manual group management",
        "admin_group_name_placeholder": "Group name",
        "admin_password_placeholder": "Password",
        "admin_create_group": "Create group",
        "admin_group_id_from": "From group ID",
        "admin_group_id_to": "To group ID",
        "admin_user_id_placeholder": "Participant ID",
        "admin_move": "Move",
        "admin_group_1": "Group 1",
        "admin_group_2": "Group 2",
        "admin_swap_participants": "Swap participants",
        "admin_playoff_override": "Playoff / Override",
        "admin_stage_id": "Stage ID",
        "admin_start_stage": "Start stage",
        "admin_from_stage_id": "From stage ID",
        "admin_promote_override": "Promote (override)",
        "admin_from_stage": "From stage",
        "admin_to_stage": "To stage",
        "admin_user_id_en": "User ID",
        "admin_manual_transfer": "Manual transfer",
        "admin_from_user": "From user",
        "admin_to_user": "To user",
        "admin_replace_participant": "Replace participant",
        "admin_points_delta": "+/- points",
        "admin_adjust_points": "Adjust points",
        "admin_stage": "Stage",
        "admin_group": "Group",
        "admin_save_playoff_game": "Save playoff game",
        "admin_save_time": "Save time",
        "admin_user_id_add": "Participant ID to add",
        "admin_add": "Add",
        "admin_user_id_remove": "Participant ID to remove",
        "admin_remove": "Remove",
        "admin_winner_loser_placeholder": "winner_id,loser_id",
        "admin_coin_toss": "Coin toss",
        "admin_user_1": "User 1",
        "admin_user_2": "User 2",
        "admin_top_n": "Top N",
        "index_nickname": "Nickname",
        "index_steam_id_or_url": "Link / Steam ID",
        "index_check_steam": "Check Steam",
        "index_steam_id": "Steam ID",
        "index_game_nickname": "In-game nickname",
        "index_current_rank": "Current rank",
        "index_highest_rank": "Highest rank",
        "index_chat": "Chat",
        "index_temp_nick": "Temporary nickname",
        "index_message": "Message",
        "index_connect_send": "Connect & Send",
        "index_cooldown": "Cooldown",
        "index_max_length": "Max length",
        "index_stages": "Stages",
        "index_active": "active",
        "index_done": "done",
        "index_tbd": "TBD",
        "js_enter_steam": "Enter Steam ID or profile URL.",
        "js_checking_steam": "Checking Steam...",
        "js_steam_data_failed": "Failed to fetch Steam data.",
        "js_steam_ok": "Steam verified, you can submit the form.",
        "js_steam_network_error": "Network error while checking Steam.",
    },
    "ru": {
        "title": "DAC Турнир",
        "nav_participants": "Участники",
        "nav_tournament": "Турнир",
        "nav_donate": "Донаты",
        "nav_rules": "Правила",
        "nav_archive": "Архив",
        "register": "Регистрация",
        "submit": "Отправить",
        "already_registered": "Вы уже зарегистрированы",
        "registered_ok": "Регистрация завершена",
        "registration_closed": "Регистрация закрыта, турнир начался",
        "msg_invalid_steam_id": "Неверный Steam ID",
        "msg_chat_disabled": "Чат отключен",
        "msg_chat_disabled_admin": "Чат отключен администратором.",
        "msg_message_too_long": "Сообщение слишком длинное",
        "msg_cooldown_active": "Подождите перед отправкой следующего сообщения",
        "msg_user_exists": "Пользователь уже существует",
        "msg_invited_added": "Приглашенный участник добавлен",
        "msg_group_not_found": "Группа не найдена",
        "msg_lobby_password_updated": "Пароль лобби обновлен",
        "msg_invalid_lobby_password": "Пароль лобби должен состоять ровно из 4 цифр",
        "msg_game_saved": "Результат игры сохранен",
        "msg_manual_tie_break_saved": "Тай-брейк сохранен",
        "msg_playoff_stage_started": "Стадия плей-офф запущена",
        "msg_players_promoted": "Игроки повышены",
        "msg_player_moved": "Игрок перемещен",
        "msg_player_replaced": "Игрок заменен",
        "msg_points_adjusted": "Очки скорректированы",
        "msg_playoff_game_saved": "Результат плей-офф сохранен",
        "msg_donation_links_saved": "Ссылки на донат сохранены",
        "msg_donation_methods_saved": "Методы доната сохранены",
        "msg_prize_pool_saved": "Призовой фонд сохранен",
        "msg_donors_saved": "Список доноров сохранен",
        "msg_rules_saved": "Правила сохранены",
        "msg_archive_saved": "Архив сохранен",
        "msg_chat_settings_saved": "Настройки чата сохранены",
        "msg_operation_failed": "Операция завершилась с ошибкой",
        "msg_status_ok": "Успешно",
        "msg_status_warn": "Предупреждение",
        "participants_title": "Участники",
        "participants_baskets_filter": "Корзины",
        "participants_direct_invites_filter": "Прямые инвайты",
        "participants_main_roster_title": "Основной состав",
        "participants_reserve_roster_title": "Резерв",
        "participants_direct_invites_title": "Прямые инвайты",
        "participants_empty": "В данной корзине нет участников",
        "participants_nick": "Ник",
        "participants_steam_id": "Steam ID",
        "participants_game": "Игра",
        "participants_current": "Текущий",
        "participants_highest": "Максимальный",
        "participants_telegram": "Telegram",
        "participants_discord": "Discord",
        "tournament_title": "Турнир",
        "tournament_group_stage": "Групповой этап",
        "tournament_no_draw": "Жеребьевка еще не произведена",
        "tournament_game": "Игра",
        "tournament_lobby_pw": "Пароль лобби",
        "tournament_playoff_title": "Текущий этап плей-офф / сетка",
        "tournament_started": "запущен",
        "tournament_pending": "ожидает",
        "tournament_scoring_mode": "Режим подсчета очков",
        "tournament_matches": "Матчи",
        "tournament_players": "Игроки",
        "tournament_standings": "Таблица",
        "tournament_user_id": "ID участника",
        "tournament_status": "Статус",
        "tournament_status_out": "выбыл",
        "tournament_status_in": "в игре",
        "tournament_bracket_matches": "Сетка / матчи",
        "tournament_match": "Матч",
        "donate_title": "Донаты",
        "donate_links": "Ссылки на донат",
        "donate_no_links": "Пока нет ссылок.",
        "donate_card_crypto": "Карта / Крипта",
        "donate_no_methods": "Пока нет способов оплаты.",
        "donate_prize_pool": "Призовой фонд",
        "donate_no_prize_pool": "Пока нет данных о призовом фонде.",
        "donate_donors": "Доноры",
        "donate_no_donors": "Пока нет доноров.",
        "rules_title": "Правила",
        "archive_title": "Архив",
        "archive_open": "Открыть",
        "archive_empty": "Пока нет записей архива.",
        "admin_title": "Панель администратора",
        "admin_login_title": "Вход администратора",
        "admin_login_placeholder": "Ключ администратора",
        "admin_login_submit": "Войти",
        "admin_logout": "Выйти",
        "msg_admin_login_failed": "Неверный ключ администратора",
        "admin_registration_toggle": "Переключатель регистрации",
        "admin_registration_open": "Регистрация открыта",
        "admin_start_tournament": "Start Tournament",
        "admin_confirm_start_tournament": "Вы уверены, что хотите запустить турнир? Регистрация будет закрыта.",
        "admin_tournament_already_started": "Турнир уже запущен",
        "admin_yes": "Да",
        "admin_no": "Нет",
        "admin_save": "Сохранить",
        "admin_manual_invited_add": "Ручное добавление в invited",
        "admin_participants_list": "Список участников",
        "admin_nickname": "Ник",
        "admin_steam_id_or_url": "Steam ID или URL",
        "admin_add_to_invited": "Добавить в INVITED",
        "admin_stages_editor": "Редактор этапов",
        "admin_key": "ключ",
        "admin_date": "дата",
        "admin_title_ru": "title_ru",
        "admin_title_en": "title_en",
        "admin_active": "активен",
        "admin_save_stage": "Сохранить этап",
        "admin_chat_settings": "Настройки чата",
        "admin_chat_enabled": "Чат включен",
        "admin_save_chat_settings": "Сохранить настройки чата",
        "admin_rules_content": "Содержимое правил",
        "admin_rules_text": "Текст правил",
        "admin_save_rules": "Сохранить правила",
        "admin_content_blocks": "Блоки контента (по одному на строку)",
        "admin_save_donation_links": "Сохранить ссылки на донат",
        "admin_save_donation_methods": "Сохранить методы доната",
        "admin_save_prize_pool": "Сохранить призовой фонд",
        "admin_save_donors": "Сохранить доноров",
        "admin_save_archive": "Сохранить архив",
        "admin_draw_controls": "Управление жеребьевкой",
        "admin_auto_draw": "Автоматическая жеребьевка",
        "admin_generate_playoff": "Сгенерировать playoff из групп",
        "admin_group_ids": "ID в группе",
        "admin_save_pw": "Сохранить PW",
        "admin_generate_pin": "Сгенерировать PIN",
        "admin_save_game_result": "Сохранить результат игры",
        "admin_save_tie_break": "Сохранить тай-брейк",
        "admin_groups_not_created": "Группы пока не созданы",
        "base_lang_en": "ENG",
        "base_lang_ru": "RU",
        "tournament_current_stage": "Текущая стадия",
        "tournament_group_stage_top64": "Групповой этап",
        "tournament_schedule": "Расписание",
        "tournament_tbd": "Скоро",
        "tournament_roster": "Состав",
        "tournament_id": "ID",
        "tournament_pts": "Очки",
        "tournament_wins_short": "П1",
        "tournament_top4": "Топ4",
        "tournament_promote_rule": "Правила продвижения по этапам:",
        "tournament_stage_1_8_label": "I этап 1/8 (56, 7x8, top-3)",
        "tournament_stage_1_4_label": "II этап 1/4 (32, 4x8, top-4)",
        "tournament_stage_semifinal_groups_label": "III этап полуфинальные группы (16, 2x8, top-4)",
        "tournament_stage_final_label": "Финал (8, правило 22+победа)",
        "tournament_stage_group_stage_label": "Групповой этап",
        "tournament_playoff": "Плей-офф",
        "tournament_final_22_hint": "22 очка + следующая игра Top1",
        "tournament_schedule_status": "Расписание / статусы",
        "tournament_group": "Группа",
        "tournament_pw": "PW",
        "tournament_winner": "победитель",
        "admin_group_manual_controls": "Ручное управление группами",
        "admin_group_name_placeholder": "Название группы",
        "admin_password_placeholder": "Пароль",
        "admin_create_group": "Создать группу",
        "admin_group_id_from": "ID группы от",
        "admin_group_id_to": "ID группы в",
        "admin_user_id_placeholder": "ID участника",
        "admin_move": "Переместить",
        "admin_group_1": "Группа 1",
        "admin_group_2": "Группа 2",
        "admin_swap_participants": "Поменять местами участников",
        "admin_playoff_override": "Playoff / Override",
        "admin_stage_id": "Stage ID",
        "admin_start_stage": "Старт стадии",
        "admin_from_stage_id": "From stage ID",
        "admin_promote_override": "Продвинуть (override)",
        "admin_from_stage": "From stage",
        "admin_to_stage": "To stage",
        "admin_user_id_en": "User ID",
        "admin_manual_transfer": "Ручной перенос",
        "admin_from_user": "From user",
        "admin_to_user": "To user",
        "admin_replace_participant": "Замена участника",
        "admin_points_delta": "+/- points",
        "admin_adjust_points": "Коррекция очков",
        "admin_stage": "Stage",
        "admin_group": "Group",
        "admin_save_playoff_game": "Сохранить playoff-игру",
        "admin_save_time": "Сохранить время",
        "admin_user_id_add": "ID участника для добавления",
        "admin_add": "Добавить",
        "admin_user_id_remove": "ID участника для удаления",
        "admin_remove": "Удалить",
        "admin_winner_loser_placeholder": "winner_id,loser_id",
        "admin_coin_toss": "Coin toss",
        "admin_user_1": "User 1",
        "admin_user_2": "User 2",
        "admin_top_n": "Top N",
        "index_nickname": "Ник",
        "index_steam_id_or_url": "Ссылка / Steam ID",
        "index_check_steam": "Проверить Steam",
        "index_steam_id": "Steam ID",
        "index_game_nickname": "Никнейм в игре",
        "index_current_rank": "Текущий ранг",
        "index_highest_rank": "Максимальный ранг",
        "index_chat": "Чат",
        "index_temp_nick": "Временный ник",
        "index_message": "Сообщение",
        "index_connect_send": "Подключиться и отправить",
        "index_cooldown": "Кулдаун",
        "index_max_length": "Макс. длина",
        "index_stages": "Этапы",
        "index_active": "активен",
        "index_done": "завершен",
        "index_tbd": "Скоро",
        "js_enter_steam": "Введите Steam ID или ссылку на профиль.",
        "js_checking_steam": "Проверяем Steam...",
        "js_steam_data_failed": "Не удалось получить данные Steam.",
        "js_steam_ok": "Steam проверен, можно отправлять форму.",
        "js_steam_network_error": "Ошибка сети при проверке Steam.",
    },
}


def get_lang(lang_cookie: str | None) -> str:
    # Возвращаем язык интерфейса с безопасным фолбэком.
    return lang_cookie if lang_cookie in {"en", "ru"} else "en"


def t(lang: str, key: str) -> str:
    # Получаем перевод по ключу.
    return TRANSLATIONS.get(lang, TRANSLATIONS["en"]).get(key, key)
